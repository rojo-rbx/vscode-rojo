{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"required": [
		"name",
		"tree"
	],
	"type": "object",
	"properties": {
		"name": {
			"type": "string",
			"title": "Project name",
			"examples": [
				"your-project-name"
			]
		},
		"servePort": {
			"type": "integer",
			"title": "Serve port",
			"description": "The port number Rojo will use to communicate with Roblox Studio. This must be unique if you're running more than one instance of Rojo."
		},
		"tree": {
			"if": {
				"properties": {
					"$className": {
						"const": "DataModel"
					}
				},
				"required": [
					"$className"
				]
			},
			"then": {
				"allOf": [
					{
						"$ref": "#/$defs/tree"
					},
					{
						"properties": {
							"StarterPlayer": {
								"properties": {
									"StarterPlayerScripts": {
										"$ref": "#/$defs/treeService"
									},
									"StarterCharacterScripts": {
										"$ref": "#/$defs/treeService"
									}
								},
								"patternProperties": {
									"^[^\\$].*$": {
										"$ref": "#/$defs/treeNormal"
									}
								}
							}
						},
						"patternProperties": {
							"^[^\\$].*$": {
								"$ref": "#/$defs/treeService"
							}
						}
					}
				]
			},
			"else": {
				"$ref": "#/$defs/treeNormal"
			}
		}
	},
	"$defs": {
		"tree": {
			"type": "object",
			"properties": {
				"$className": {
					"type": "string"
				},
				"$ignoreUnknownInstances": {
					"type": "boolean"
				},
				"$path": {
					"type": "string"
				},
				"$properties": {
					"type": "object",
					"properties": {
						"Name": false,
						"Parent": false
					}
				}
			}
		},
		"treeNormal": {
			"allOf": [
				{
					"$ref": "#/$defs/tree"
				},
				{
					"anyOf": [
						{
							"required": [
								"$className"
							]
						},
						{
							"required": [
								"$path"
							]
						}
					]
				},
				{
					"patternProperties": {
						"^[^\\$].*$": {
							"$ref": "#/$defs/treeNormal"
						}
					}
				}
			]
		},
		"treeService": {
			"allOf": [
				{
					"$ref": "#/$defs/tree"
				},
				{
					"patternProperties": {
						"^[^\\$].*$": {
							"$ref": "#/$defs/treeNormal"
						}
					}
				}
			]
		}
	}
}
